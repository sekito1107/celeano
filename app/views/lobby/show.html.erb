<% content_for :head do %>
  <%= stylesheet_link_tag "lobby", "data-turbo-track": "reload" %>
<% end %>

<div class="lobby-container">
    <div class="lobby-background"></div>
  <div class="lobby-overlay"></div>
  
  <div class="lobby-header">
    <%= render Lobby::UserProfileComponent.new(user: current_user) %>
    <div class="lobby-header__controls">
      <%= render Lobby::DeckSelectorComponent.new(user: current_user) %>
    </div>
  </div>

  <div class="lobby-content" data-controller="lobby-carousel">
    <button class="carousel-control carousel-control--prev" data-action="lobby-carousel#previous" aria-label="Previous Slide">
      ❮
    </button>

    <div class="lobby-carousel-viewport">
      <% @game_modes.each_with_index do |mode, index| %>
        <div class="lobby-carousel-slide <%= 'hidden' unless index == 0 %>" data-lobby-carousel-target="slide">
          <%= render Lobby::GameModeCardComponent.new(
            title: mode[:title],
            description: mode[:description],
            image_path: mode[:image_path],
            action_text: mode[:action_text],
            badge: mode[:badge]
          ) %>
        </div>
      <% end %>
    </div>

    <button class="carousel-control carousel-control--next" data-action="lobby-carousel#next" aria-label="Next Slide">
      ❯
    </button>
  </div>
</div>
